SSEG SEGMENT STACK
	DB 100 DUP(0)
	TOS DB 0
SSEG ENDS

DSEG SEGMENT
	STR DB "0123456789ABCDEF"
	ANS DB 4 DUP(0),'H',13,10,'$'
	NOERROR DB 'NOERROR',13,10,'$'
	ERROR DB 'ERROR',13,10,'$'
	RAM DB 10000 DUP(0)
DSEG ENDS

ESEG SEGMENT

ESEG ENDS

CSEG SEGMENT
	ASSUME SS:SSEG, DS:DSEG, ES:ESEG, CS:CSEG
WADDRESS PROC FAR
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH DX
	PUSH DI
	PUSH SI
	PUSHF
	LEA AX,RAM[BX]
	MOV BX,AX
	AND BX,000FH
	MOV BL,STR [BX]
	MOV ANS [3],BL
	MOV BX,AX
	MOV CL,4
	SHR BX,CL
	AND BX,000FH
	MOV BL,STR [BX]
	MOV ANS [2],BL
	MOV BX,AX
	MOV CL,8
	SHR BX,CL
	AND BX,000FH
	MOV BL,STR [BX]
	MOV ANS [1],BL
	MOV BX,AX
	MOV CL,12
	SHR BX,CL
	AND BX,000FH
	MOV BL,STR [BX]
	MOV ANS [0],BL
	MOV AH,9
	MOV DX,OFFSET ANS
	INT 21H
	POPF
	POP SI
	POP DI
	POP DX
	POP CX
	POP BX
	POP AX	
	RET
WADDRESS ENDP
MAIN PROC FAR
	MOV AX,DSEG
	MOV DS,AX
	MOV AX,ESEG
	MOV ES,AX
	MOV AX,SSEG
	MOV SS,AX
	LEA SP,TOS
	MOV CX,0
	MOV BX,0
REPEAT:	MOV RAM[BX],55H
	MOV DL,RAM[BX]
	MOV RAM[BX],0AAH
	MOV DH,RAM[BX]
	CMP DX,0AA55H
	JE THEN1
	INC CX
	CALL WADDRESS
		
THEN1:	INC BX
	CMP BX,10000
	JNE REPEAT
	MOV AH,09H
	LEA DX,NOERROR
	CMP CX,0
	JE THEN2
	LEA DX,ERROR
THEN2:	INT 21H

EXIT:	MOV AH,4CH
	INT 21H
MAIN ENDP

CSEG ENDS

END MAIN