SSEG SEGMENT STACK
	DB 100 DUP(0)
	TOS DB 0
SSEG ENDS

DSEG SEGMENT
	N DB 0
	S DB 256 DUP(0)
DSEG ENDS

ESEG SEGMENT

ESEG ENDS

CSEG SEGMENT
	ASSUME SS:SSEG, DS:DSEG, ES:ESEG, CS:CSEG
MAIN PROC FAR
	MOV AX,DSEG
	MOV DS,AX
	MOV AX,ESEG
	MOV ES,AX
	MOV AX,SSEG
	MOV SS,AX
	LEA SP,TOS
	MOV AH,03H
	MOV BH,0
	INT 10H
	PUSH CX
	MOV AH,06H
	MOV AL,00H
	MOV BH,07H
	MOV BL,54H
	MOV CX,0000H
	MOV DX,2479H
	INT 10H
	MOV AH,01H
	MOV CH,00H
	MOV CL,255
	INT 10H
	MOV AH,02H
	MOV BH,00H
	MOV DX,0
	INT 10H
READ:	MOV AH,0
	INT 16H
	CMP AL,8
	JNZ ELSE1
	MOV AH,0EH
	INT 10H
	MOV AH,0EH
	MOV AL,0
	INT 10H	
	MOV AH,0EH
	MOV AL,8
	INT 10H	
	JMP READ
ELSE1:CMP AL,0DH
	JNZ ELSE2
	MOV AH,0EH
	INT 10H
	MOV AH,0EH
	MOV AL,0AH
	INT 10H	
	JMP READ	
ELSE2:CMP AX,4B00H
	JNZ ELSE3
	MOV AH,03H
	MOV BH,0
	INT 10H
	DEC DL
	MOV AH,02H
	MOV BH,0
	INT 10H
	JMP READ
ELSE3:CMP AX,4800H
	JNZ ELSE4
	MOV AH,03H
	MOV BH,0
	INT 10H
	DEC DH
	MOV AH,02H
	MOV BH,0
	INT 10H
	JMP READ
ELSE4:CMP AX,4D00H
	JNZ ELSE5
	MOV AH,03H
	MOV BH,0
	INT 10H
	INC DL
	MOV AH,02H
	MOV BH,0
	INT 10H
	JMP READ
ELSE5:CMP AX,5000H
	JNZ ELSE6
	MOV AH,03H
	MOV BH,0
	INT 10H
	INC DH
	MOV AH,02H
	MOV BH,0
	INT 10H
	JMP READ
ELSE6:CMP AL,27
	JZ EXIT
	MOV AH,0EH
	INT 10H
	JMP READ

	
EXIT:	MOV AH,06H
	MOV AL,00H
	MOV BH,07H
	MOV BL,54H
	MOV CX,0000H
	MOV DX,2479H
	INT 10H
	MOV AH,01H
	POP CX
	INT 10H
	MOV AH,02H
	MOV BH,00H
	MOV DX,0
	INT 10H
	MOV AH,4CH
	INT 21H
MAIN ENDP

CSEG ENDS

END MAIN